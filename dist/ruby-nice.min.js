/**
 * ruby-nice
 *
 * The nice javascript library to rubynize your javascript to be a happy programmer again.
 *
 * @version 0.1.10
 * @date 2022-06-26T21:12:11.456Z
 * @link https://github.com/magynhard/ruby-nice
 * @author Matthäus J. N. Beyrle
 * @copyright Matthäus J. N. Beyrle
 */
var _slicedToArray=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],i=!0,r=!1,s=void 0;try{for(var a,o=e[Symbol.iterator]();!(i=(a=o.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,s=e}finally{try{!i&&o.return&&o.return()}finally{if(r)throw s}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},_createClass=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.assign(Array.prototype,{flatten:function(){var n=this;return function e(t){return 0<(t=t||n).filter(function(e){return Typifier.isArray(e)}).length?e(t.flat()):t.flat()}()}}),Object.assign(Array.prototype,{getMax:function(){return 0===this.length?null:Math.max.apply(Math,_toConsumableArray(this))}}),Object.assign(Array.prototype,{getMin:function(){return 0===this.length?null:Math.min.apply(Math,_toConsumableArray(this))}});var File=function(){function a(){_classCallCheck(this,a)}return _createClass(a,null,[{key:"delete",value:function(e){RubyNice.ensureRunningInNodeJs(),Fs.unlinkSync(e)}},{key:"getAbsolutePath",value:function(e,t){return a.expandPath(e,t,{expand_user_dir:!1})}},{key:"getAccessTime",value:function(e){return Fs.lstatSync(e).atime}},{key:"getBasename",value:function(e,t){e=(e=a.normalizePath(e)).split("/").filter(function(e){return""!==e}).getLast();return t&&(".*"===t&&e.includes(".")?e=e.substring(0,e.lastIndexOf(".")):e.endsWith(t)&&(e=e.substring(0,e.lastIndexOf(t)))),e}},{key:"getBirthTime",value:function(e){return Fs.lstatSync(e).birthtime}},{key:"getDirname",value:function(e){var t=a;return(e=t.normalizePath(e)).substring(0,t.normalizePath(e).lastIndexOf("/"))}},{key:"getSize",value:function(e){return e=a.normalizePath(e),Fs.statSync(e).size}},{key:"expandPath",value:function(e,t,n){var i=1<arguments.length&&void 0!==t?t:"",r=2<arguments.length&&void 0!==n?n:{},s=a;return void 0===(r=r||{}).expand_user_dir&&(r.expand_user_dir=!0),e=s.normalizePath(e),i=s.normalizePath(i),e.startsWith("~")&&i&&i.startsWith("~")?Path.resolve(s._resolveUserDirInPath(e)):(e=i?s._resolveUserDirInPath(i)+"/"+s._resolveUserDirInPath(e):s._resolveUserDirInPath(e),Path.resolve(e))}},{key:"isDirectory",value:function(e){return a.isExisting(e)&&Fs.lstatSync(e).isDirectory()}},{key:"isEmpty",value:function(e){var t=a;return t.isExisting(e)&&0===t.getSize(e)}},{key:"isExisting",value:function(e){return Fs.existsSync(e)}},{key:"isFile",value:function(e){return a.isExisting(e)&&Fs.lstatSync(e).isFile()}},{key:"normalizePath",value:function(e){return a._cutTrailingSlash(e.replace(/\\/g,"/"))}},{key:"read",value:function(e,t){RubyNice.ensureRunningInNodeJs();var n="utf8";t&&["binary","buffer"].includes(t.encoding)&&(n=null);n=Fs.readFileSync(e,n);return t&&"base64"!==t.encoding&&(t.offset&&(n=n.slice(t.offset)),t.length&&(n=n.slice(0,t.length))),n}},{key:"rename",value:function(e,t){RubyNice.ensureRunningInNodeJs(),Fs.renameSync(e,t)}},{key:"readAsDataUri",value:function(e){var t=Mime.getType(e);if(t)return"data:"+t+";base64,"+Fs.readFileSync(e,"base64");throw"No mime type found for file '"+e+"'"}},{key:"write",value:function(e,t,n){RubyNice.ensureRunningInNodeJs();var i={encoding:"utf8"};return n&&(n.flag&&(i.flag=n.flag),["binary","buffer"].includes(n.encoding)&&(i.encoding=null)),Fs.writeFileSync(e,t,i)}},{key:"_cutTrailingSlash",value:function(e){return e.endsWith("/")?e.substring(0,e.length-1):e}},{key:"_resolveUserDirInPath",value:function(e){var t=a,n=/^~([^\/]*)\//,i=e.match(n);return i&&(e=i[1]?t.getDirname(process.env.HOME)+"/"+i[1]+"/"+e.replace(n,""):e.replace(n,process.env.HOME+"/")),e}}]),a}();Object.defineProperty(Number.prototype,"timesWithIndex",{value:function(e){if("function"==typeof e)if(Typifier.isNumber(this)||Typifier.isNumberClass(this))for(var t=0;t<this&&!1!==e(t);++t);else console.warn(Typifier.getType(this)+".timesWithIndex is not a valid function");return this},enumerable:!1}),Object.defineProperty(Number.prototype,"round",{value:function(){if(Typifier.isNumber(this)||Typifier.isNumberClass(this))return Math.round(this);console.warn(Typifier.getType(this)+".round is not a valid function")},enumerable:!1}),Object.defineProperty(Number.prototype,"ceil",{value:function(){if(Typifier.isNumber(this)||Typifier.isNumberClass(this))return Math.ceil(this);console.warn(Typifier.getType(this)+".ceil is not a valid function")},enumerable:!1}),Object.defineProperty(Number.prototype,"floor",{value:function(){if(Typifier.isNumber(this)||Typifier.isNumberClass(this))return Math.floor(this);console.warn(Typifier.getType(this)+".floor is not a valid function")},enumerable:!1}),Object.defineProperty(Object.prototype,"eachWithIndex",{value:function(e){if("function"==typeof e)if(Typifier.isArray(this)){for(var t=0;t<this.length;++t)if(!1===e(this[t],t,{state:!1}))break}else if(Typifier.isObject(this)){var n=0,i=!0,r=!1,s=void 0;try{for(var a=Object.entries(this)[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){var o=o.value,o=_slicedToArray(o,2);if(!1===e(o[0],o[1],n))break;++n}}catch(e){r=!0,s=e}finally{try{!i&&a.return&&a.return()}finally{if(r)throw s}}}else console.warn(Typifier.getType(this)+".eachWithIndex is not a valid function");return this},enumerable:!1}),Object.defineProperty(Object.prototype,"mapObject",{value:function(e){if("function"==typeof e){if(Typifier.isObject(this)){Object.entries(this).map(function(e,t){return a={},a[e[0]]=e[1],a});var t=[],n=0,i=!0,r=!1,s=void 0;try{for(var o=Object.entries(this)[Symbol.iterator]();!(i=(u=o.next()).done);i=!0){var u=u.value,u=_slicedToArray(u,2),u=e(u[0],u[1],n);t.push(u),++n}}catch(e){r=!0,s=e}finally{try{!i&&o.return&&o.return()}finally{if(r)throw s}}return t}console.warn(Typifier.getType(this)+".mapObject is not a valid function")}},enumerable:!1}),Object.defineProperty(Object.prototype,"getFirst",{value:function(){if(!Typifier.is("Column",this)){if(Typifier.isArray(this)&&0<this.length)return this[0];if(Typifier.isObject(this)&&0<Object.entries(this).length){var e=Object.entries(this)[0],t={};return t[e[0]]=e[1],t}console.warn(Typifier.getType(this)+".getFirst is not a valid function")}},enumerable:!1}),Object.defineProperty(Object.prototype,"getLast",{value:function(){if(!Typifier.is("Column",this)){if(Typifier.isArray(this)&&0<this.length)return this[this.length-1];if(Typifier.isObject(this)&&0<Object.entries(this).length){var e=Object.entries(this)[Object.entries(this).length-1],t={};return t[e[0]]=e[1],t}console.warn(Typifier.getType(this)+".getLast is not a valid function")}},enumerable:!1}),Object.defineProperty(Object.prototype,"getSample",{value:function(){if(!Typifier.is("Column",this)){if(Typifier.isArray(this)&&0<this.length)return this[Math.floor(Math.random()*this.length)];if(Typifier.isObject(this)&&0<Object.entries(this).length){var e=Math.floor(Math.random()*Object.entries(this).length),t=Object.entries(this)[e],e={};return e[t[0]]=t[1],e}console.warn(Typifier.getType(this)+".getSample is not a valid function")}},enumerable:!1}),Object.assign(String.prototype,{toDownCase:function(){return this.toLocaleLowerCase()}}),Object.assign(String.prototype,{toUpCase:function(){return this.toLocaleUpperCase()}});var RubyNice=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"ensureRunningInNodeJs",value:function(){if(!e.isRunningInNodeJs())throw new Error("The used method can only be used when running with node js.")}},{key:"getVersion",value:function(){return e._version}},{key:"isRunningInNodeJs",value:function(){return"undefined"!=typeof module&&module.exports}},{key:"isRunningInBrowser",value:function(){return!e.isRunningInNodeJs()}}]),e}();RubyNice._version="0.1.10";